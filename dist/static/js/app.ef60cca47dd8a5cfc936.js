webpackJsonp([1,0],[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(31),s=i(o),c=n(16),a=i(c);s.default.use(n(30)),window.kyle=new s.default,new s.default({el:"#app",template:"<App/>",components:{App:a.default}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),s=i(o),c=n(22),a=i(c),d=n(18),r=i(d),u=n(17),l=i(u),_=n(15);e.default={name:"app",components:{NoticeList:a.default,LastUpdated:r.default,Notice:s.default,Countdown:l.default},data:function(){return{time:null,clock:!1,initialized:!1,notices:[],notice_counter:0,one:"column_one",two:"column_two",three:"column_three",column_one:{title:"Loading..."},column_two:{title:"Loading..."},column_three:{title:"Loading..."},last_updated:"Updating..."}},methods:{addColumnNotice:function(t){var e=this,n=e.getNotice();e[t]=n,window.kyle.$emit("notice_active",{id:n.id,column:e.getColumn(t)}),e.notice_counter++},getColumn:function(t){var e=!1;switch(t){case"column_one":e="A";break;case"column_two":e="B";break;case"column_three":e="C";break;default:e=!1}return e},getNotice:function(){for(var t=this,e=t.$refs.noticeList.$children,n=!1,i=t.notice_counter;;){if(t.notices[i]||(i=0),!e[i].active){n=t.notices[i];break}i++}return t.notice_counter=i++,n},initialized:function(){var t=this;t.$el.classList.add("is-ready"),t.initialized=!0,window.kyle.$on("switch_notice",function(e){t.addColumnNotice(e.column)})},updateData:function(){var t=this;this.$http.get("https://www.boston.gov/api/v1/public-notices?"+Date.now()).then(function(e){t.notices=e.body.slice(0,13),t.last_updated=Date.now(),t.initialized!==!0&&window.kyle.$emit("initialized")})}},created:function(){var t=this;t.updateData(),window.kyle.$on("initialized",this.initialized),t.pusher=new _("165e0e23610763f5ea8d"),t.pusherChannel=this.pusher.subscribe("updates"),t.pusherChannel.bind("reload",function(t){window.location.reload()}),t.pusherChannel.bind("update_notice",function(e){t.updateData()})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={created:function(){window.setTimeout(this.countdown,1e3)},data:function(){return{seconds:58,seconds_left:5,show_time:!0,timeout:""}},methods:{countdown:function(){var t=this;try{this.seconds_left>0?(t.seconds_left--,t.timeout=window.setTimeout(t.countdown,1e3)):(t.seconds_left=t.seconds,t.show_time=!1,window.kyle.$emit("change_page"),window.setTimeout(function(){t.show_time=!0,t.countdown()},1e3))}catch(e){try{window.setTimeout(function(){t.show_time=!0,t.countdown()},1e3)}catch(t){window.location.reload()}}}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"last_updated",props:["updated"],computed:{updated_time:function(){try{var t=new Date(this.updated),e=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.getHours()?e[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()+" "+(t.getHours()>12?t.getHours()-12:t.getHours())+":"+t.getMinutes()+(t.getHours()>11?"PM":"AM"):"Updating..."}catch(t){console.log("Need a valid date")}}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(20),s=i(o);e.default={name:"notice",props:["notice","column"],components:{NoticeBody:s.default},computed:{column_name:function(){switch(this.column){case"column_one":return"A";case"column_two":return"B";case"column_three":return"C"}}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"notice_body",data:function(){return{page_number:1,page_count:1,body_height:0,content_height:0}},props:["body","drawers","id","column"],created:function(){window.kyle.$on("change_page",this.change_page)},updated:function(){this.calculate_pages()},methods:{change_page:function(){var t=this.page_count,e=this.page_number,n=0;e>=t?(this.$refs.content.style.transform="translateY(0)",this.page_number=1,window.kyle.$emit("notice_inactive",{id:this.id}),window.kyle.$emit("switch_notice",{column:this.column})):(n=e*this.body_height*-1+25,n+="px",this.$refs.content.style.transform="translateY("+n+")",this.page_number++)},calculate_pages:function(){this.body_height=this.$refs.body.clientHeight,this.content_height=this.$refs.content.clientHeight,this.page_count=Math.ceil(this.content_height/this.body_height)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"notice_item",props:["notice"],data:function(){return{active:!1,column:!1}},created:function(){window.kyle.$on("notice_active",this.checkIfActive),window.kyle.$on("notice_inactive",this.inactiveNotice)},methods:{checkIfActive:function(t){t.id===this.notice.id&&(this.active=!0,this.column=t.column)},inactiveNotice:function(t){t.id===this.notice.id&&(this.active=!1,this.column=!1)}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),s=i(o);e.default={name:"notice_list",components:{NoticeItem:s.default},props:["notices"]}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,n){var i,o;n(9),i=n(1);var s=n(24);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,n){var i,o;n(12),i=n(2);var s=n(27);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,o._scopeId="data-v-8e0d1224",t.exports=i},function(t,e,n){var i,o;n(8),i=n(3);var s=n(23);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,o._scopeId="data-v-39c852c2",t.exports=i},function(t,e,n){var i,o;n(13),i=n(4);var s=n(28);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,o._scopeId="data-v-c1d98e2a",t.exports=i},function(t,e,n){var i,o;n(14),i=n(5);var s=n(29);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,n){var i,o;n(10),i=n(6);var s=n(25);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=i},function(t,e,n){var i,o;n(11),i=n(7);var s=n(26);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,o._scopeId="data-v-79d96d29",t.exports=i},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"last-updated"},["Last updated: "+_s(updated_time)])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"app",attrs:{id:"app"}},[_h("div",{staticClass:"container"},[_h("div",{staticClass:"header"},[_m(0)," ",_h("LastUpdated",{attrs:{updated:last_updated}})])," ",_h("div",{staticClass:"main"},[_h("div",{staticClass:"columns"},[_h("Notice",{attrs:{notice:column_one,column:one}})," ",_h("Notice",{attrs:{notice:column_two,column:two}})," ",_h("Notice",{attrs:{notice:column_three,column:three}})])," ",_h("Countdown")])])," ",_h("div",{staticClass:"sidebar"},[_h("NoticeList",{ref:"noticeList",attrs:{notices:notices}})])])},staticRenderFns:[function(){with(this)return _h("h1",["City Clerk Postings"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("li",{staticClass:"notice-item",class:{active:active}},[_h("div",{staticClass:"notice-item-container"},[active?_h("div",{staticClass:"notice-column"},[_h("span",[_s(column)])]):_e()," ",_h("div",{staticClass:"notice-info"},[_h("div",{staticClass:"notice-title notice-oneline",domProps:{innerHTML:_s(notice.title)}})," ",_h("div",{staticClass:"notice-location"},[_s(notice.location_street),notice.location_room?_h("span",[", "+_s(notice.location_room)]):_e()])])," ","1"!==notice.canceled?_h("div",{staticClass:"notice-datetime"},[_h("div",{staticClass:"notice-date",domProps:{innerHTML:_s(notice.notice_date)}})," ",_h("div",{staticClass:"notice-time",domProps:{innerHTML:_s(notice.notice_time)}})]):_h("div",{staticClass:"notice-datetime"},[_h("div",{staticClass:"notice-canceled"},["Canceled"])])," "])])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("ul",{staticClass:"notices-list"},[_l(notices,function(t,e){return _h("notice-item",{tag:"li",attrs:{notice:t}})})])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"countdown-container"},[_h("div",{staticClass:"countdown"},[show_time?_h("div",["Next page in ",_h("strong",[_m(0),_s(seconds_left)])]):_h("div",["Updating..."])," "])," ",_m(1)])},staticRenderFns:[function(){with(this)return _h("span",[":"])},function(){with(this)return _h("div",{staticClass:"view"},["\n    View all public notices at ",_h("strong",["boston.gov/public-notices"])])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"notice"},[_h("div",{staticClass:"notice-header"},[_h("div",{staticClass:"notice-title-container"},[_h("div",{staticClass:"notice-column"},[_h("span",[_s(column_name)])])," ",_h("div",{staticClass:"notice-title",domProps:{innerHTML:_s(notice.title)}})])," ",_h("ul",{staticClass:"notice-details"},["1"!==notice.canceled?_h("li",{staticClass:"notice-detail"},[_m(0)," ",_h("div",{staticClass:"notice-detail-content"},[_h("div",{domProps:{innerHTML:_s(notice.notice_date)}})," ",_h("div",{domProps:{innerHTML:_s(notice.notice_time)}})])]):_h("li",{staticClass:"notice-detail"},[_h("div",{staticClass:"notice-detail-header"},["When"])," ",_h("div",{staticClass:"notice-detail-content"},[_h("span",{staticClass:"notice-canceled"},["Canceled"])])])," "," ",_h("li",{staticClass:"notice-detail"},[_m(1)," ",_h("div",{staticClass:"notice-detail-content"},[_h("div",{domProps:{innerHTML:_s(notice.location_street)}})," ",_h("div",{domProps:{innerHTML:_s(notice.location_room)}})])])," ",_h("li",{staticClass:"notice-detail"},[_m(2)," ",_h("div",{staticClass:"notice-detail-content"},[_h("div",{domProps:{innerHTML:_s(notice.posted)}})])])])])," ",notice.testimony_time?_h("div",{staticClass:"notice-testimony"},["Public testimony begins at ",_h("span",{domProps:{innerHTML:_s(notice.testimony_time)}})]):_e()," ",_h("NoticeBody",{attrs:{id:notice.id,body:notice.body,drawers:notice.field_drawer,column:column}})])},staticRenderFns:[function(){with(this)return _h("div",{staticClass:"notice-detail-header"},["When"])},function(){with(this)return _h("div",{staticClass:"notice-detail-header"},["Where"])},function(){with(this)return _h("div",{staticClass:"notice-detail-header"},["Posted"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"notice-body-container"},[_h("div",{ref:"body",staticClass:"notice-body"},[_h("div",{ref:"content",staticClass:"notice-body-content"},[_h("div",{staticClass:"notice-body-body",domProps:{innerHTML:_s(body)}})," ",_h("ol",{staticClass:"notice-body-list"},[_l(drawers,function(t){return _h("div",[_h("div",{domProps:{innerHTML:_s(t)}})])})])])])," ",_h("div",{staticClass:"notice-meta"},[_h("div",{staticClass:"notice-pages"},[_s(page_number)+" of "+_s(page_count)])," ",_h("div",{staticClass:"notice-url"},["boston.gov/public-notices/"+_s(id)])])])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.ef60cca47dd8a5cfc936.js.map