webpackJsonp([1,0],[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(31),c=i(o),s=n(16),a=i(s);c.default.use(n(30)),window.kyle=new c.default,new c.default({el:"#app",template:"<App/>",components:{App:a.default}})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),c=i(o),s=n(22),a=i(s),d=n(18),r=i(d),u=n(17),l=i(u),_=n(15);e.default={name:"app",components:{NoticeList:a.default,LastUpdated:r.default,Notice:c.default,Countdown:l.default},data:function(){return{time:null,clock:!1,notices:[],notice_counter:0,one:"column_one",two:"column_two",three:"column_three",column_one:{title:"Loading..."},column_two:{title:"Loading..."},column_three:{title:"Loading..."},last_updated:"Updating..."}},methods:{addColumnNotice:function(t){var e=this,n=e.getNotice();e[t]=n,window.kyle.$emit("notice_active",{id:n.id,column:e.getColumn(t)}),e.notice_counter++},getColumn:function(t){var e=!1;switch(t){case"column_one":e="A";break;case"column_two":e="B";break;case"column_three":e="C";break;default:e=!1}return e},getNotice:function(){for(var t=this,e=t.$refs.noticeList.$children,n=!1,i=t.notice_counter;;){if(t.notices[i]||(i=0),!e[i].active){n=t.notices[i];break}i++}return t.notice_counter=i++,n},initialized:function(){var t=this;t.$el.classList.add("is-ready"),t.initialized=!0,window.kyle.$on("switch_notice",function(e){t.addColumnNotice(e.column)})},updateData:function(){var t=this;this.$http.get("https://www.boston.gov/api/v1/public-notices?"+Date.now()).then(function(e){t.notices=e.body.slice(0,13),t.last_updated=Date.now(),t.initialized!==!0&&window.kyle.$emit("initialized")})}},created:function(){var t=this;t.updateData(),window.kyle.$on("initialized",this.initialized),t.pusher=new _("165e0e23610763f5ea8d"),t.pusherChannel=this.pusher.subscribe("updates"),t.pusherChannel.bind("reload",function(t){window.location.reload()}),t.pusherChannel.bind("update_notice",function(e){t.updateData()})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={created:function(){window.setTimeout(this.countdown,1e3)},data:function(){return{seconds:58,seconds_left:3,show_time:!0,timeout:""}},methods:{countdown:function(){var t=this;try{this.seconds_left>0?(t.seconds_left--,t.timeout=window.setTimeout(t.countdown,1e3)):(t.seconds_left=t.seconds,t.show_time=!1,window.kyle.$emit("change_page"),window.setTimeout(function(){t.show_time=!0,t.countdown()},1e3))}catch(e){try{window.setTimeout(function(){t.show_time=!0,t.countdown()},1e3)}catch(t){window.location.reload()}}}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"last_updated",props:["updated"],computed:{updated_time:function(){try{var t=new Date(this.updated),e=["January","February","March","April","May","June","July","August","September","October","November","December"];return t.getHours()?e[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()+" "+(t.getHours()>12?t.getHours()-12:t.getHours())+":"+t.getMinutes()+(t.getHours()>11?"PM":"AM"):"Updating..."}catch(t){console.log("Need a valid date")}}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(20),c=i(o);e.default={name:"notice",props:["notice","column"],components:{NoticeBody:c.default},computed:{column_name:function(){switch(this.column){case"column_one":return"A";case"column_two":return"B";case"column_three":return"C"}}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"notice_body",data:function(){return{page_number:1,page_count:1,body_height:0,content_height:0}},props:["body","drawers","id","column"],created:function(){window.kyle.$on("change_page",this.change_page)},updated:function(){this.calculate_pages()},methods:{change_page:function(){var t=this.page_count,e=this.page_number,n=0;e>=t?(this.$refs.content.style.transform="translateY(0)",this.page_number=1,window.kyle.$emit("notice_inactive",{id:this.id}),window.kyle.$emit("switch_notice",{column:this.column})):(n=e*this.body_height*-1+25,n+="px",this.$refs.content.style.transform="translateY("+n+")",this.page_number++)},calculate_pages:function(){this.body_height=this.$refs.body.clientHeight,this.content_height=this.$refs.content.clientHeight,this.page_count=Math.ceil(this.content_height/this.body_height)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"notice_item",props:["notice"],data:function(){return{active:!1,column:!1}},created:function(){window.kyle.$on("notice_active",this.checkIfActive),window.kyle.$on("notice_inactive",this.inactiveNotice)},methods:{checkIfActive:function(t){t.id===this.notice.id&&(this.active=!0,this.column=t.column)},inactiveNotice:function(t){t.id===this.notice.id&&(this.active=!1,this.column=!1)}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(21),c=i(o);e.default={name:"notice_list",components:{NoticeItem:c.default},props:["notices"]}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,n){var i,o;n(9),i=n(1);var c=n(24);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=c.render,o.staticRenderFns=c.staticRenderFns,t.exports=i},function(t,e,n){var i,o;n(12),i=n(2);var c=n(27);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=c.render,o.staticRenderFns=c.staticRenderFns,o._scopeId="data-v-8e0d1224",t.exports=i},function(t,e,n){var i,o;n(8),i=n(3);var c=n(23);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=c.render,o.staticRenderFns=c.staticRenderFns,o._scopeId="data-v-39c852c2",t.exports=i},function(t,e,n){var i,o;n(13),i=n(4);var c=n(28);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=c.render,o.staticRenderFns=c.staticRenderFns,o._scopeId="data-v-c1d98e2a",t.exports=i},function(t,e,n){var i,o;n(14),i=n(5);var c=n(29);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=c.render,o.staticRenderFns=c.staticRenderFns,t.exports=i},function(t,e,n){var i,o;n(10),i=n(6);var c=n(25);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=c.render,o.staticRenderFns=c.staticRenderFns,t.exports=i},function(t,e,n){var i,o;n(11),i=n(7);var c=n(26);o=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(o=i=i.default),"function"==typeof o&&(o=o.options),o.render=c.render,o.staticRenderFns=c.staticRenderFns,o._scopeId="data-v-79d96d29",t.exports=i},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"last-updated"},[t._v("Last updated: "+t._s(t.updated_time))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app",attrs:{id:"app"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"header"},[n("h1",[t._v("City Clerk Postings")]),t._v(" "),n("LastUpdated",{attrs:{updated:t.last_updated}})],1),t._v(" "),n("div",{staticClass:"main"},[n("div",{staticClass:"columns"},[n("Notice",{attrs:{notice:t.column_one,column:t.one}}),t._v(" "),n("Notice",{attrs:{notice:t.column_two,column:t.two}}),t._v(" "),n("Notice",{attrs:{notice:t.column_three,column:t.three}})],1),t._v(" "),n("Countdown")],1)]),t._v(" "),n("div",{staticClass:"sidebar"},[n("NoticeList",{ref:"noticeList",attrs:{notices:t.notices}})],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{key:"notice-{{ notice.id }}",staticClass:"notice-item",class:{active:t.active}},[n("div",{staticClass:"notice-item-container"},[t.active?n("div",{staticClass:"notice-column"},[n("span",[t._v(t._s(t.column))])]):t._e(),t._v(" "),n("div",{staticClass:"notice-info"},[n("div",{staticClass:"notice-title notice-oneline",domProps:{innerHTML:t._s(t.notice.title)}}),t._v(" "),n("div",{staticClass:"notice-location"},[t._v(t._s(t.notice.location_street)),t.notice.location_room?n("span",[t._v(", "),n("span",{domProps:{innerHTML:t._s(t.notice.location_room)}})]):t._e()])]),t._v(" "),"1"!==t.notice.canceled?n("div",{staticClass:"notice-datetime"},[n("div",{staticClass:"notice-date",domProps:{innerHTML:t._s(t.notice.notice_date)}}),t._v(" "),n("div",{staticClass:"notice-time",domProps:{innerHTML:t._s(t.notice.notice_time)}})]):t._e(),t._v(" "),"1"===t.notice.canceled?n("div",{staticClass:"notice-datetime"},[n("div",{staticClass:"notice-canceled"},[t._v("Canceled")])]):t._e()])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"notices-list"},t._l(t.notices,function(t,e){return n("notice-item",{tag:"li",attrs:{notice:t}})}))},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"countdown-container"},[n("div",{staticClass:"countdown"},[t.show_time?n("div",[t._v("Next page in "),n("strong",[n("span",[t._v(":")]),t._v(t._s(t.seconds_left))])]):n("div",[t._v("Updating...")])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view"},[t._v("\n    View all public notices at "),n("strong",[t._v("boston.gov/public-notices")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notice"},[n("div",{staticClass:"notice-header"},[n("div",{staticClass:"notice-title-container"},[n("div",{staticClass:"notice-column"},[n("span",[t._v(t._s(t.column_name))])]),t._v(" "),n("div",{staticClass:"notice-title",domProps:{innerHTML:t._s(t.notice.title)}})]),t._v(" "),n("ul",{staticClass:"notice-details"},["1"!==t.notice.canceled?n("li",{staticClass:"notice-detail"},[n("div",{staticClass:"notice-detail-header"},[t._v("When")]),t._v(" "),n("div",{staticClass:"notice-detail-content"},[n("div",{domProps:{innerHTML:t._s(t.notice.notice_date)}}),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.notice.notice_time)}})])]):n("li",{staticClass:"notice-detail"},[n("div",{staticClass:"notice-detail-header"},[t._v("When")]),t._v(" "),t._m(0)]),t._v(" "),n("li",{staticClass:"notice-detail"},[n("div",{staticClass:"notice-detail-header"},[t._v("Where")]),t._v(" "),n("div",{staticClass:"notice-detail-content"},[n("div",{domProps:{innerHTML:t._s(t.notice.location_street)}}),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.notice.location_room)}})])]),t._v(" "),n("li",{staticClass:"notice-detail"},[n("div",{staticClass:"notice-detail-header"},[t._v("Posted")]),t._v(" "),n("div",{staticClass:"notice-detail-content"},[n("div",{domProps:{innerHTML:t._s(t.notice.posted)}})])])])]),t._v(" "),""===t.notice.testimony_time?n("div",{staticClass:"notice-testimony"},[t._v("The public can offer testimony")]):t._e(),t._v(" "),n("NoticeBody",{attrs:{id:t.notice.id,body:t.notice.body,drawers:t.notice.field_drawer,column:t.column}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notice-detail-content"},[n("span",{staticClass:"notice-canceled"},[t._v("Canceled")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notice-body-container"},[n("div",{ref:"body",staticClass:"notice-body"},[n("div",{ref:"content",staticClass:"notice-body-content"},[n("div",{staticClass:"notice-body-body",domProps:{innerHTML:t._s(t.body)}}),t._v(" "),n("ol",{staticClass:"notice-body-list"},t._l(t.drawers,function(e){return n("div",[n("div",{domProps:{innerHTML:t._s(e)}})])}))])]),t._v(" "),n("div",{staticClass:"notice-meta"},[n("div",{staticClass:"notice-pages"},[t._v(t._s(t.page_number)+" of "+t._s(t.page_count))]),t._v(" "),n("div",{staticClass:"notice-url"},[t._v("boston.gov/public-notices/"+t._s(t.id))])])])},staticRenderFns:[]}},,,function(t,e){}]);
//# sourceMappingURL=app.09ecf52f2842ba62dc84.js.map